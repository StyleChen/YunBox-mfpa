jQuery(document).ready(function($) {
/*
    console.log(123)
    function a(f) {
        var g = new RegExp("(^|&)" + f + "=([^&]*)(&|$)", "i");
        var h = window.location.search.substr(1).match(g);
        if (h != null) {
            return unescape(h[2])
        }
        return null
    }

    var d = a("page");
    if (d == null) {
        d = 0
    }
    d = parseInt(d);
    // $("#menu-menu-1 li").eq(d).addClass("nav-active");
    var c = $("#menu-menu-1 li").eq(d).find("dt");
    var e = c.css('background-image');
    var b = e.slice(0, e.length - 6);
    c.css("background-image", b + "-active.png");
    $("#menu-menu-1 li").hover(function () {
        if (!$(this).hasClass("nav-active")) {
            var g = $(this).find("dt");
            var h = g.css("background-image");
            console.log(h)
            var f = h.slice(0, h.length - 6);
            g.css("background-image", f + "-active.png")
        }
    }, function () {
    if (!$(this).hasClass("nav-active")) {
        var g = $(this).find("dt");
        var h = g.css("background-image");
        var f = h.slice(0, h.length - 13);
        g.css("background-image", f + ".png")
    }
});
$("#menu-menu-1>li").click(function () {
    $(this).parent().children("li").removeClass("nav-active");
    $(this).addClass("nav-active")
})
*/
    // 子菜单跳转
    var el =  $("#menu-menu-1 li");
    var ac = $('#menu-menu-1 .active');
    var loca = window.localStorage;
    if(ac.length > 0){
        for(var i=0;i<el.length;i++){
            if(el[i]==ac[0]){
                loca.i = i;
            }
        }
    }else {
        $("#menu-menu-1 li").eq(parseInt(loca.i)).addClass('active');
    }
            // 导航hover
          var g = $('nav .active').find("dt");
          var h = g.css("background-image");
          var f = h.slice(0, h.length - 6);
          g.css("background-image", f + "-active.png")
        $("#menu-menu-1 li").hover(function () {
            if (!$(this).hasClass("active")) {
                var g = $(this).find("dt");
                var h = g.css("background-image");
                console.log(h)
                var f = h.slice(0, h.length - 6);
                g.css("background-image", f + "-active.png")
            }
        }, function () {
            if (!$(this).hasClass("active")) {
                var g = $(this).find("dt");
                var h = g.css("background-image");
                var f = h.slice(0, h.length - 13);
                g.css("background-image", f + ".png")
            }
        });


        // 个人中心页面，免费注册
        $('.login-a').click(function () {
            $(this).parent().siblings('.login-wrap').removeClass('hide');
            $(this).parent().addClass('hide');
        })




    // 首页产品放大图
    $("#kadima_portfolio_section dl").click(function () {
        $("#product").removeClass("hide");
        var dl = $("#kadima_portfolio_section dl");
        for(var i =0;i<dl.length;i++){
            console.log(dl[i])
            if($(this)[0] == dl[i]){
                $("#carousel-example-generic-1 .item").removeClass("active");
                $("#carousel-example-generic-1 .item").eq(i).addClass("active");
            }
        }
    })
    // 不自动播放
    $('#carousel-example-generic-1').carousel({
        pause: true,
        interval: false
    });

    $("#colse").click(function () {
        $("#product").addClass("hide");
    })

    function lineHeight() {
        if($(".post-content-wrap-title")){
            var heightp = $(".post-content-wrap-title");
            for(var t=0;t<heightp.length;t++){
                var hp = $(".post-content-wrap-title").eq(t).css("height");
                $(".post-content-wrap-title").eq(t).css("line-height",hp);
                console.log(hp)
                console.log(heightp[t])
            }
        }
    }
    lineHeight();
    $(".post-content-wrap").hover(function () {
        var self = $(this);
        $(this).children('.post-content-wrap-title').animate({
            'height':'100%'
        },{
            duration:200,
            complete:function () {
                var hp = self.children('.post-content-wrap-title').css("height");
                self.children('.post-content-wrap-title').css("line-height",hp);
                console.log(hp)
            }
        })

    },function () {
        var self = $(this);
        $(this).children('.post-content-wrap-title').animate({
            'height':'30%'
        },{
            duration:200,
            complete:function () {
                var hp = self.children('.post-content-wrap-title').css("height");
                self.children('.post-content-wrap-title').css("line-height",hp);
                console.log(hp)
            }
        })
    })

    $(".aside-ul li.active").addClass('aside-active');
    // 文章详情页 侧栏状态
    $(".current-post-parent").addClass("aside-active");

    // 时间轴
    $(".timeBaseItem").each(function (index, element) {
        if(index % 3 == 0){
            $(this).find(".timeBaseItemP").eq(0).css("background-image","url('wp-content/themes/kadima/images/timeBase1.png')");
            $(this).find(".timeBaseItemAddress p").eq(0).css("background-color","#F0BE3B");
            $(this).append("<style>.timeBase>div:nth-child("+(index+1)+") .timeBaseItemAddress p:after{border-right-color: #F0BE3B}</style>");
        }else if(index % 3 == 1){
            $(this).find(".timeBaseItemP").eq(0).css("background-image","url('wp-content/themes/kadima/images/timeBase2.png')");
            $(this).find(".timeBaseItemAddress p").eq(0).css("background-color","#27A39B");
            $(this).append("<style>.timeBase>div:nth-child("+(index+1)+") .timeBaseItemAddress p:after{border-right-color: #27A39B}</style>");
        }else{
            $(this).find(".timeBaseItemP").eq(0).css("background-image","url('wp-content/themes/kadima/images/timeBase3.png')");
            $(this).find(".timeBaseItemAddress p").eq(0).css("background-color","#EA5761");
            $(this).append("<style>.timeBase>div:nth-child("+(index+1)+") .timeBaseItemAddress p:after{border-right-color: #EA5761}</style>");
        }
    })








});